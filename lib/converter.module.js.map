{"version":3,"file":"converter.module.js","sources":["../src/converter.ts"],"sourcesContent":["import {\n  decode,\n  encode,\n  fromWords,\n  toWords\n} from 'bech32';\nimport {\n  isValidChecksumAddress,\n  stripHexPrefix,\n  toChecksumAddress\n} from 'crypto-addr-codec';\n\n\nfunction makeChecksummedHexEncoder(chainId?: number) {\n  return (data: Buffer) => toChecksumAddress(data.toString('hex'), chainId || null);\n}\n\nfunction makeChecksummedHexDecoder(chainId?: number) {\n  return (data: string) => {\n    const stripped = stripHexPrefix(data);\n    if (\n      !isValidChecksumAddress(data, chainId || null) &&\n      stripped !== stripped.toLowerCase() &&\n      stripped !== stripped.toUpperCase()\n    ) {\n      throw Error('Invalid address checksum');\n    }\n    return Buffer.from(stripHexPrefix(data), 'hex');\n  };\n}\n\nconst hexChecksumChain = (name: string, chainId?: number) => ({\n  decoder: makeChecksummedHexDecoder(chainId),\n  encoder: makeChecksummedHexEncoder(chainId),\n  name,\n});\n\nexport const ETH = hexChecksumChain('ETH');\n\nfunction makeBech32Encoder(prefix: string) {\n  return (data: Buffer) => encode(prefix, toWords(data));\n}\n\nfunction makeBech32Decoder(currentPrefix: string) {\n  return (data: string) => {\n    const { prefix, words } = decode(data);\n    if (prefix !== currentPrefix) {\n      throw Error('Unrecognised address format');\n    }\n    return Buffer.from(fromWords(words));\n  };\n}\n\n\nconst bech32Chain = (name: string, prefix: string) => ({\n  decoder: makeBech32Decoder(prefix),\n  encoder: makeBech32Encoder(prefix),\n  name,\n});\n\nexport const ETHERMINT = bech32Chain('ETHERMINT', 'ethm');\n\nexport const ethToEthermint = (ethAddress: string) => {\n  let data = ETH.decoder(ethAddress);\n  return ETHERMINT.encoder(data);\n};\n\nexport const ethermintToEth = (ethermintAddress: string) => {\n  let data = ETHERMINT.decoder(ethermintAddress);\n  return ETH.encoder(data);\n};\n\n\nexport const ATMOS = bech32Chain('ATMOS', 'atmos');\n\nexport const ethToAtmos = (ethAddress: string) => {\n  let data = ETH.decoder(ethAddress);\n  return ATMOS.encoder(data);\n}\n\nexport const atmosToEth = (atmosAddress: string) => {\n  let data = ATMOS.decoder(atmosAddress);\n  return ETH.encoder(data);\n};\n\nexport const bech32ToEip55 = (bech32: string, name: string, prefix: string) => {\n  let bech32Engine = bech32Chain(name, prefix);\n  let data = bech32Engine.decoder(bech32);\n  return ETH.encoder(data);\n}\n\nexport const Eip55ToBech32 = (eip55: string, name: string, prefix: string) => {\n  let bech32Engine = bech32Chain(name, prefix);\n  let data = ETH.decoder(eip55);\n  return bech32Engine.encoder(data);\n}\n"],"names":["ETH","decoder","data","stripped","stripHexPrefix","isValidChecksumAddress","toLowerCase","toUpperCase","Error","Buffer","from","encoder","toChecksumAddress","toString","name","makeBech32Encoder","prefix","encode","toWords","bech32Chain","currentPrefix","words","decode","fromWords","ETHERMINT","ethToEthermint","ethAddress","ethermintToEth","ethermintAddress","ATMOS","ethToAtmos","atmosToEth","atmosAddress","bech32ToEip55","bech32","Eip55ToBech32","eip55","bech32Engine"],"mappings":"8KA+BA,MAMaA,GALXC,QAdQC,IACN,MAAMC,EAAWC,EAAeF,GAChC,IACGG,EAAuBH,EAAiB,OACzCC,IAAaA,EAASG,eACtBH,IAAaA,EAASI,cAEtB,MAAMC,MAAM,4BAEd,OAAOC,OAAOC,KAAKN,EAAeF,GAAO,QAM3CS,QAnBQT,GAAiBU,EAAkBV,EAAKW,SAAS,OAAmB,MAoB5EC,KAGkC,OAEpC,SAASC,EAAkBC,GACzB,OAAQd,GAAiBe,EAAOD,EAAQE,EAAQhB,IAclD,MAAMiB,EAAc,CAACL,EAAcE,YACjCf,SAZyBmB,EAYEJ,EAXnBd,IACN,MAAMc,OAAEA,EAAFK,MAAUA,GAAUC,EAAOpB,GACjC,GAAIc,IAAWI,EACb,MAAMZ,MAAM,+BAEd,OAAOC,OAAOC,KAAKa,EAAUF,MAO/BV,QAASI,EAAkBC,GAC3BF,KAAAA,GAdF,IAA2BM,GAiBdI,EAAYL,EAAY,YAAa,QAErCM,EAAkBC,IAC7B,IAAIxB,EAAOF,EAAIC,QAAQyB,GACvB,OAAOF,EAAUb,QAAQT,IAGdyB,EAAkBC,IAC7B,IAAI1B,EAAOsB,EAAUvB,QAAQ2B,GAC7B,OAAO5B,EAAIW,QAAQT,IAIR2B,EAAQV,EAAY,QAAS,SAE7BW,EAAcJ,IACzB,IAAIxB,EAAOF,EAAIC,QAAQyB,GACvB,OAAOG,EAAMlB,QAAQT,IAGV6B,EAAcC,IACzB,IAAI9B,EAAO2B,EAAM5B,QAAQ+B,GACzB,OAAOhC,EAAIW,QAAQT,IAGR+B,EAAgB,CAACC,EAAgBpB,EAAcE,KAC1D,IACId,EADeiB,EAAYL,EAAME,GACbf,QAAQiC,GAChC,OAAOlC,EAAIW,QAAQT,IAGRiC,EAAgB,CAACC,EAAetB,EAAcE,KACzD,IAAIqB,EAAelB,EAAYL,EAAME,GACjCd,EAAOF,EAAIC,QAAQmC,GACvB,OAAOC,EAAa1B,QAAQT"}